
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Intersection Tooltip venn.js example</title>
	<link href="dimple/custom_style.css" rel="stylesheet">
        <script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
		<script src="dimple/venn.js"></script>
</head>

<body>
    <div class="venn"></div>
</body>

<style>
.venntooltip {
  position: absolute;
  text-align: center;
  width: 128px;
  height: 18px;
  background: #333;
  color: #ddd;
  border: 0px;
  border-radius: 8px;
  opacity: 0;
}
</style>



<script>

var myLabel = " machins"; // laisser l'espace
var myWidth = 500;
var myHeight = 500;


var sets = [ 									<!-- ou bien placer entre balise <script> src="data/data_venn.jsonp" -->
         {"label": "Circle A", "size": 300},
         {"label": "Circle B", "size": 300},
         {"label": "Circle C", "size": 300},
    ],

    overlaps = [
         {"sets": [0, 1], "size": 100},
         {"sets": [0, 2], "size": 100},
		 {"sets": [1, 2], "size": 99},
		 {"sets": [0, 1, 2], "size": 50},

	];




// get positions for each set
sets = venn.venn(sets, overlaps);

// draw the diagram in the 'venn' div
var diagram = venn.drawD3Diagram(d3.select(".venn"), sets, myWidth, myHeight);

// add a tooltip showing the size of each set/intersection
var tooltip = d3.select("body").append("div")
    .attr("class", "venntooltip");

d3.selection.prototype.moveParentToFront = function() {
  return this.each(function(){
    this.parentNode.parentNode.appendChild(this.parentNode);
  });
};

// hover on all the circles
diagram.circles
    .style("stroke-opacity", 0)
    .style("stroke", "white")
    .style("stroke-width", "1")
    .on("mousemove", function() {
        tooltip.style("left", (d3.event.pageX) + "px")
               .style("top", (d3.event.pageY - 28) + "px");
    })
    .on("mouseover", function(d, i) {
        var selection = d3.select(this);
        d3.select(this).moveParentToFront()
            .transition()
            .style("fill-opacity", .5)
            .style("stroke-opacity", 1);

        tooltip.transition().style("opacity", .9);
        tooltip.text(d.size + myLabel);
    })
    .on("mouseout", function(d, i) {
        d3.select(this).transition()
            .style("fill-opacity", .3)
            .style("stroke-opacity", 0);
        tooltip.transition().style("opacity", 0);
    });

// draw a path around each intersection area, add hover there as well
diagram.svg.select("g").selectAll("path")
    .data(overlaps)
    .enter()
    .append("path")
    .attr("d", function(d) { 
        return venn.intersectionAreaPath(d.sets.map(function(j) { return sets[j]; })); 
    })
    .style("fill-opacity","0")
    .style("fill", "black")
    .style("stroke-opacity", 0)
    .style("stroke", "white")
    .style("stroke-width", "1")
    .on("mouseover", function(d, i) {
        d3.select(this).transition()
            .style("fill-opacity", .1)
            .style("stroke-opacity", 1);
        tooltip.transition().style("opacity", .9);
        tooltip.text(d.size + myLabel);
    })
    .on("mouseout", function(d, i) {
        d3.select(this).transition()
            .style("fill-opacity", 0)
            .style("stroke-opacity", 0);
        tooltip.transition().style("opacity", 0);
    })
    .on("mousemove", function() {
        tooltip.style("left", (d3.event.pageX) + "px")
               .style("top", (d3.event.pageY - 28) + "px");
    })
</script>
</html>
